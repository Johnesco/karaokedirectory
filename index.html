<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Austin Karaoke Directory</title>

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Application styles -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/views.css">
</head>
<body>
    <header class="site-header">
        <div class="site-header__content">
            <h1 class="site-header__title">Greater Austin Karaoke Directory</h1>
            <p class="site-header__tagline">Find karaoke near you, every night of the week</p>
        </div>
    </header>

    <nav id="navigation" class="navigation-container"></nav>

    <main id="main-content" class="main-content">
        <!-- Views render here -->
        <div class="loading">
            <i class="fa-solid fa-spinner fa-spin"></i>
            Loading venues...
        </div>
    </main>

    <div id="venue-modal"></div>

    <footer class="site-footer">
        <div class="site-footer__social">
            <h2>Follow Us</h2>
            <div class="social-links">
                <a href="https://www.facebook.com/groups/2494105004273043"
                   target="_blank" rel="noopener noreferrer" title="Facebook">
                    <i class="fa-brands fa-facebook fa-lg"></i>
                </a>
                <a href="https://www.instagram.com/karaokedirectory/"
                   target="_blank" rel="noopener noreferrer" title="Instagram">
                    <i class="fa-brands fa-instagram fa-lg"></i>
                </a>
            </div>
        </div>
        <div class="site-footer__links">
            <a href="about.html">About Us</a>
            <a href="submit.html">Submit Venue</a>
        </div>
        <p class="site-footer__copyright">
            &copy; 2025 Austin Karaoke Directory
        </p>
    </footer>

    <button id="back-to-top" class="back-to-top" aria-label="Back to top" hidden>
        <i class="fa-solid fa-chevron-up"></i>
    </button>

    <button id="jump-to-today" class="jump-to-today" aria-label="Jump to today" hidden>
        <i class="fa-solid fa-calendar-day"></i> Today
    </button>

    <!-- Application scripts -->
    <script src="js/data.js"></script>
    <script type="module" src="js/app.js"></script>

    <!-- Back to top and Jump to Today button behavior -->
    <script>
        const backToTop = document.getElementById('back-to-top');
        const jumpToTodayBtn = document.getElementById('jump-to-today');

        function updateTodayButtonVisibility() {
            // Show button if not on current week
            if (typeof window.isCurrentWeek === 'function' && !window.isCurrentWeek()) {
                jumpToTodayBtn.hidden = false;
                return;
            }

            // On current week - show button if today's card is not visible
            const todayCard = document.querySelector('.day-card--today');
            if (todayCard) {
                const rect = todayCard.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                jumpToTodayBtn.hidden = isVisible;
            } else {
                jumpToTodayBtn.hidden = true;
            }
        }

        window.addEventListener('scroll', () => {
            backToTop.hidden = window.scrollY < 300;
            updateTodayButtonVisibility();
        });

        // Also update when week changes (check periodically)
        setInterval(updateTodayButtonVisibility, 500);

        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        jumpToTodayBtn.addEventListener('click', () => {
            if (typeof window.jumpToToday === 'function') {
                window.jumpToToday();
            }
        });
    </script>
</body>
</html>
